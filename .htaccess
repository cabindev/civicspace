# ModSecurity whitelist for all components paths and Next.js internals
<IfModule mod_security.c>
    # Disable ModSecurity for all component groups
    <LocationMatch "^/components/(traditions|ethnic-group|creative-activity|public-policy)">
        SecRuleEngine Off
    </LocationMatch>
    
    # Disable for Next.js internal paths
    <LocationMatch "^/_next/">
        SecRuleEngine Off
    </LocationMatch>
    
    # Disable for API routes
    <LocationMatch "^/api/">
        SecRuleEngine Off
    </LocationMatch>
    
    # Or disable specific rules for all components
    SecRuleRemoveById 210710
    SecRuleRemoveById 214930
    
    # Allow text/plain content type for all component groups
    <LocationMatch "^/components/(traditions|ethnic-group|creative-activity|public-policy)">
        SecRule REQUEST_HEADERS:Content-Type "text/plain" "phase:1,allow,ctl:ruleEngine=off,id:999001"
    </LocationMatch>
</IfModule>

# Alternative approach - disable for all component paths
<Files ~ "^/components/">
    SecRuleEngine Off
</Files>

# For cPanel ModSecurity - disable problematic rules globally
<IfModule mod_security2.c>
    SecRuleRemoveById 210710
    SecRuleRemoveById 214930
    
    # Whitelist all component paths
    SecRule REQUEST_URI "^/components/(traditions|ethnic-group|creative-activity|public-policy)" \
        "phase:1,allow,ctl:ruleEngine=DetectionOnly,id:999002"
    
    # Whitelist Next.js internals and Server Actions
    SecRule REQUEST_URI "^/_next/" \
        "phase:1,allow,ctl:ruleEngine=DetectionOnly,id:999005"
    
    # Whitelist API routes
    SecRule REQUEST_URI "^/api/" \
        "phase:1,allow,ctl:ruleEngine=DetectionOnly,id:999006"
    
    # Allow Server Actions (Next.js form submissions)
    SecRule REQUEST_METHOD "POST" \
        "chain,phase:1,allow,ctl:ruleEngine=DetectionOnly,id:999007"
    SecRule REQUEST_HEADERS:Next-Action "!@eq 0"
</IfModule>