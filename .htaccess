# ModSecurity whitelist - simplified for shared hosting compatibility

# For cPanel ModSecurity - disable problematic rules globally
<IfModule mod_security2.c>
    SecRuleRemoveById 210710
    SecRuleRemoveById 214930
    
    # Whitelist all component paths
    SecRule REQUEST_URI "^/components/(traditions|ethnic-group|creative-activity|public-policy)" \
        "phase:1,allow,ctl:ruleEngine=DetectionOnly,id:999002"
    
    # Whitelist Next.js internals and Server Actions
    SecRule REQUEST_URI "^/_next/" \
        "phase:1,allow,ctl:ruleEngine=DetectionOnly,id:999005"
    
    # Whitelist API routes
    SecRule REQUEST_URI "^/api/" \
        "phase:1,allow,ctl:ruleEngine=DetectionOnly,id:999006"
    
    # Allow common content types
    SecRule REQUEST_HEADERS:Content-Type "^(application/json|text/plain|multipart/form-data|application/x-www-form-urlencoded)" \
        "phase:1,allow,ctl:ruleEngine=DetectionOnly,id:999007"
</IfModule>

# Standard Next.js routing
RewriteEngine On